<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>DWG Viewer (GitHub Pages)</title>

<script src="https://cdn.jsdelivr.net/npm/@webcad/dxf-viewer@1.2.0/dist/dxf-viewer.min.js"></script>

<style>
body{
  margin:0;
  font-family:Arial;
  background:#eee;
}

.header{
  background:#222;
  color:white;
  padding:10px;
  text-align:center;
}

#controls{
  position:fixed;
  top:70px;
  left:10px;
  background:white;
  padding:10px;
  border-radius:6px;
  box-shadow:0 0 5px rgba(0,0,0,.3);
}

#viewer{
  width:100vw;
  height:calc(100vh - 60px);
}
</style>
</head>

<body>

<div class="header">
<h3>DWG Viewer (Works on GitHub Pages)</h3>
</div>

<div id="controls">
<b>Select DWG:</b><br>
<input type="file" id="fileInput" accept=".dwg,.dxf">
<p id="status">Upload a DWG file</p>
</div>

<div id="viewer"></div>

<script>
const viewer = new DxfViewer(document.getElementById("viewer"));

document.getElementById("fileInput").addEventListener("change", function(e){
  const file = e.target.files[0];
  const status = document.getElementById("status");

  if(!file) return;

  status.innerText = "Loading " + file.name + " ...";

  const reader = new FileReader();

  reader.onload = function(evt){
    try{
      viewer.load(evt.target.result);
      status.innerText = "Loaded: " + file.name;
    }
    catch(err){
      status.innerText = "Error: " + err.message;
      console.error(err);
    }
  };

  reader.readAsArrayBuffer(file);
});
</script>

</body>
</html>
